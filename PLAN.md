# План реализации программы ChatList

## Этап 1: Настройка проекта и зависимостей
1.1. Проверить и обновить `requirements.txt` с необходимыми библиотеками:
   - PyQt6 (для GUI)
   - requests или httpx (для HTTP-запросов)
   - python-dotenv (для работы с .env файлом)
   - sqlite3 (встроенная библиотека Python)

1.2. Создать файл `.env.example` с примером структуры для API-ключей
1.3. Создать файл `.gitignore` для исключения `.env` и других служебных файлов

## Этап 2: Проектирование и создание базы данных
2.1. Создать модуль `db.py` с функциями:
   - `init_database()` - инициализация БД и создание таблиц
   - Функции для работы с таблицей `prompts` (CRUD операции)
   - Функции для работы с таблицей `models` (CRUD операции)
   - Функции для работы с таблицей `results` (CRUD операции)
   - Функции для работы с таблицей `settings` (CRUD операции)

2.2. Реализовать создание всех таблиц согласно схеме из DATABASE.md
2.3. Добавить начальные данные (например, примеры моделей)
2.4. Протестировать работу с БД (создание, чтение, обновление, удаление)

## Этап 3: Модуль работы с моделями
3.1. Создать модуль `models.py`:
   - Класс или функции для управления моделями нейросетей
   - Функция получения списка активных моделей из БД
   - Функция получения API-ключей из .env файла
   - Валидация настроек моделей

3.2. Реализовать поддержку разных типов API (OpenAI, DeepSeek, Groq и т.д.)
3.3. Создать абстракцию для унификации работы с разными API

## Этап 4: Модуль сетевых запросов
4.1. Создать модуль `network.py`:
   - Функция отправки промта в конкретную модель
   - Обработка различных типов API (OpenAI, DeepSeek, Groq)
   - Обработка ошибок и таймаутов
   - Асинхронная отправка запросов в несколько моделей одновременно

4.2. Реализовать логирование запросов (опционально)
4.3. Добавить обработку исключений и retry-логику

## Этап 5: Основной интерфейс - структура окна
5.1. Обновить `main.py`:
   - Создать главное окно приложения
   - Разделить интерфейс на области:
     * Область ввода промта (текстовое поле или выбор из сохраненных)
     * Область выбора моделей (чекбоксы или список)
     * Область результатов (таблица с ответами)
     * Кнопки управления (Отправить, Сохранить, Очистить)

5.2. Реализовать меню приложения (Файл, Настройки, Помощь)
5.3. Добавить статус-бар для отображения состояния программы

## Этап 6: Функционал ввода промта
6.1. Реализовать текстовое поле для ввода нового промта
6.2. Создать выпадающий список или таблицу для выбора сохраненных промтов
6.3. Добавить возможность добавления тегов к промту
6.4. Реализовать сохранение нового промта в БД

## Этап 7: Функционал отправки запросов
7.1. Реализовать кнопку "Отправить":
   - Получение активных моделей из БД
   - Отправка промта во все активные модели через `network.py`
   - Отображение процесса загрузки (прогресс-бар или индикатор)

7.2. Создать временную структуру данных для хранения результатов в памяти
7.3. Обработать случаи ошибок при отправке запросов

## Этап 8: Интерфейс результатов
8.1. Создать таблицу для отображения результатов:
   - Колонка "Модель" (название модели)
   - Колонка "Ответ" (текст ответа, с возможностью прокрутки)
   - Колонка "Выбрано" (чекбокс для каждой строки)

8.2. Реализовать обновление таблицы при получении новых результатов
8.3. Добавить возможность сортировки по колонкам
8.4. Реализовать поиск по результатам (опционально)

## Этап 9: Сохранение результатов
9.1. Реализовать кнопку "Сохранить":
   - Получение всех строк с отмеченными чекбоксами
   - Сохранение выбранных результатов в таблицу `results` БД
   - Связывание результатов с промтом и моделью

9.2. Добавить подтверждение сохранения
9.3. Очистка временной таблицы после сохранения

## Этап 10: Управление промтами
10.1. Создать окно/панель управления промтами:
    - Просмотр всех сохраненных промтов
    - Редактирование промтов
    - Удаление промтов
    - Поиск и фильтрация по тегам

10.2. Реализовать поиск и сортировку в таблице промтов

## Этап 11: Управление моделями
11.1. Создать окно/панель управления моделями:
    - Добавление новых моделей
    - Редактирование настроек моделей (name, api-url, api-id)
    - Активация/деактивация моделей (is_active)
    - Удаление моделей

11.2. Валидация настроек моделей при добавлении/редактировании

## Этап 12: Просмотр сохраненных результатов
12.1. Создать окно/панель для просмотра сохраненных результатов:
    - Таблица с сохраненными результатами
    - Фильтрация по промту, модели, дате
    - Поиск и сортировка

12.2. Реализовать возможность удаления результатов

## Этап 13: Настройки приложения
13.1. Создать окно настроек:
    - Управление настройками из таблицы `settings`
    - Настройки интерфейса (тема, размер шрифта и т.д.)
    - Настройки работы с API (таймауты, retry и т.д.)

## Этап 14: Экспорт данных (опционально)
14.1. Реализовать экспорт результатов в Markdown:
    - Форматирование данных
    - Сохранение в файл

14.2. Реализовать экспорт результатов в JSON:
    - Структурированное сохранение данных
    - Сохранение в файл

## Этап 15: Логирование (опционально)
15.1. Настроить систему логирования:
    - Логирование запросов к API
    - Логирование ошибок
    - Логирование действий пользователя

15.2. Создать окно просмотра логов

## Этап 16: Тестирование и отладка
16.1. Протестировать все основные функции:
    - Работа с БД
    - Отправка запросов к API
    - Сохранение и загрузка данных
    - Интерфейс пользователя

16.2. Исправить найденные ошибки
16.3. Оптимизировать производительность

## Этап 17: Финальная полировка
17.1. Улучшить пользовательский интерфейс (UI/UX)
17.2. Добавить обработку всех возможных ошибок
17.3. Создать README.md с инструкциями по установке и использованию
17.4. Подготовить релизную версию

