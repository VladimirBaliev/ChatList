# Руководство по публикации ChatList на GitHub Release и GitHub Pages

## Содержание
1. [Подготовка к публикации](#подготовка-к-публикации)
2. [Настройка GitHub Actions](#настройка-github-actions)
3. [Создание релиза вручную](#создание-релиза-вручную)
4. [Автоматическая публикация через GitHub Actions](#автоматическая-публикация-через-github-actions)
5. [Настройка GitHub Pages](#настройка-github-pages)
6. [Обновление версии](#обновление-версии)

---

## Подготовка к публикации

### 1. Проверка структуры проекта

Убедитесь, что в корне проекта есть следующие файлы:
- `version.py` - файл с версией приложения
- `MinimalApp.spec` - конфигурация PyInstaller
- `requirements.txt` - зависимости проекта
- `.github/workflows/release.yml` - workflow для автоматической сборки
- `.github/workflows/pages.yml` - workflow для GitHub Pages

### 2. Настройка секретов GitHub (для автоматической публикации)

Если вы хотите использовать автоматическую публикацию через GitHub Actions, добавьте секреты в настройках репозитория:

1. Перейдите в **Settings** → **Secrets and variables** → **Actions**
2. Добавьте следующие секреты (если нужны):
   - `GITHUB_TOKEN` - автоматически создается GitHub (не требует ручной настройки)

### 3. Подготовка файлов для релиза

Перед созданием релиза убедитесь, что:
- ✅ Все изменения закоммичены
- ✅ Версия в `version.py` обновлена
- ✅ Тесты пройдены (если есть)
- ✅ README.md актуален

---

## Настройка GitHub Actions

### Автоматическая сборка и публикация

Файл `.github/workflows/release.yml` автоматически:
1. Собирает приложение для Windows при создании нового релиза
2. Создает ZIP-архив с приложением
3. Прикрепляет артефакты к релизу

**Как это работает:**
- При создании нового релиза с тегом (например, `v1.0.0`) автоматически запускается сборка
- Собранные файлы автоматически прикрепляются к релизу

---

## Создание релиза вручную

### Шаг 1: Обновление версии

1. Откройте файл `version.py`
2. Обновите версию:
   ```python
   __version__ = "1.0.0"  # Новая версия
   ```
3. Закоммитьте изменения:
   ```bash
   git add version.py
   git commit -m "Bump version to 1.0.0"
   git push
   ```

### Шаг 2: Создание тега

Создайте тег для новой версии:
```bash
git tag -a v1.0.0 -m "Release version 1.0.0"
git push origin v1.0.0
```

Или через GitHub:
1. Перейдите в **Releases** → **Tags**
2. Нажмите **Create a new release**
3. Введите тег: `v1.0.0`
4. Выберите ветку (обычно `main` или `master`)
5. Заполните описание релиза (можно использовать шаблон из `RELEASE_NOTES_TEMPLATE.md`)

### Шаг 3: Сборка приложения (если не используется автоматизация)

Если вы не используете GitHub Actions, соберите приложение вручную:

#### На Windows:
```bash
# Активация виртуального окружения
.\venv\Scripts\activate

# Установка зависимостей
pip install -r requirements.txt
pip install pyinstaller

# Сборка приложения
python -m PyInstaller MinimalApp.spec
```

Собранные файлы будут в папке `dist/ChatList-v1.0.0/`

### Шаг 4: Создание релиза на GitHub

1. Перейдите на страницу репозитория
2. Нажмите **Releases** → **Create a new release**
3. Выберите тег `v1.0.0` (или создайте новый)
4. Заполните:
   - **Release title**: `ChatList v1.0.0`
   - **Description**: Используйте шаблон из `RELEASE_NOTES_TEMPLATE.md`
5. Прикрепите файлы:
   - `dist/ChatList-v1.0.0/ChatList-v1.0.0.exe` (или всю папку в ZIP)
   - `installer/ChatList-Setup-v1.0.0.exe` (если есть установщик)
6. Нажмите **Publish release**

---

## Автоматическая публикация через GitHub Actions

### Как использовать

1. **Обновите версию** в `version.py`
2. **Создайте тег и релиз** на GitHub:
   ```bash
   git tag -a v1.0.0 -m "Release version 1.0.0"
   git push origin v1.0.0
   ```
3. **Создайте релиз на GitHub** через веб-интерфейс:
   - Перейдите в **Releases** → **Draft a new release**
   - Выберите тег `v1.0.0`
   - Заполните описание
   - Нажмите **Publish release**

GitHub Actions автоматически:
- ✅ Соберет приложение для Windows
- ✅ Создаст ZIP-архив с приложением
- ✅ Прикрепит артефакты к релизу

### Проверка статуса сборки

1. Перейдите в **Actions** на странице репозитория
2. Найдите workflow "Release" для вашего тега
3. Дождитесь завершения (зеленая галочка)

---

## Настройка GitHub Pages

### Вариант 1: Автоматический деплой через GitHub Actions

1. Файл `.github/workflows/pages.yml` уже настроен
2. Перейдите в **Settings** → **Pages**
3. В разделе **Source** выберите:
   - **Source**: `GitHub Actions`
4. Сохраните настройки

После каждого push в ветку `main` (или `gh-pages`) сайт автоматически обновится.

### Вариант 2: Ручной деплой

1. Перейдите в **Settings** → **Pages**
2. В разделе **Source** выберите:
   - **Branch**: `gh-pages`
   - **Folder**: `/ (root)`
3. Нажмите **Save**

### Структура файлов для GitHub Pages

```
/
├── index.html          # Главная страница-лендинг
├── assets/            # CSS, JS, изображения (опционально)
└── .github/
    └── workflows/
        └── pages.yml  # Workflow для автоматического деплоя
```

### Обновление лендинга

1. Отредактируйте `index.html`
2. Закоммитьте и запушьте изменения:
   ```bash
   git add index.html
   git commit -m "Update landing page"
   git push
   ```
3. GitHub Actions автоматически обновит сайт

---

## Обновление версии

### Процесс обновления версии

1. **Обновите версию** в `version.py`:
   ```python
   __version__ = "1.1.0"  # Новая версия
   ```

2. **Обновите CHANGELOG.md** (если есть):
   - Добавьте список изменений для новой версии

3. **Закоммитьте изменения**:
   ```bash
   git add version.py CHANGELOG.md
   git commit -m "Bump version to 1.1.0"
   git push
   ```

4. **Создайте новый релиз** (см. раздел "Создание релиза вручную")

---

## Чеклист перед релизом

- [ ] Версия обновлена в `version.py`
- [ ] Все изменения закоммичены
- [ ] Тесты пройдены (если есть)
- [ ] README.md актуален
- [ ] Создан тег для новой версии
- [ ] Описание релиза подготовлено
- [ ] Приложение собрано и протестировано
- [ ] Файлы прикреплены к релизу
- [ ] GitHub Pages обновлен (если нужно)

---

## Решение проблем

### Проблема: GitHub Actions не запускается

**Решение:**
- Убедитесь, что файл `.github/workflows/release.yml` существует
- Проверьте синтаксис YAML файла
- Убедитесь, что тег создан правильно (формат: `v1.0.0`)

### Проблема: Сборка не проходит

**Решение:**
- Проверьте логи в разделе **Actions**
- Убедитесь, что все зависимости указаны в `requirements.txt`
- Проверьте, что `MinimalApp.spec` настроен правильно

### Проблема: GitHub Pages не обновляется

**Решение:**
- Проверьте настройки в **Settings** → **Pages**
- Убедитесь, что workflow `.github/workflows/pages.yml` существует
- Проверьте логи в разделе **Actions**

---

## Полезные ссылки

- [GitHub Releases Documentation](https://docs.github.com/en/repositories/releasing-projects-on-github)
- [GitHub Actions Documentation](https://docs.github.com/en/actions)
- [GitHub Pages Documentation](https://docs.github.com/en/pages)
- [PyInstaller Documentation](https://pyinstaller.org/)

---

## Контакты и поддержка

Если у вас возникли вопросы или проблемы, создайте Issue в репозитории.

